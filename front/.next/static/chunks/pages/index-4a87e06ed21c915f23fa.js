_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{RNiq:function(t,e,n){"use strict";n.r(e),n.d(e,"__N_SSP",(function(){return g}));var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("1zst"),l=n("ODXe"),c=n("Vl3Y"),u=n("5rEg"),f=n("2/Rp"),s=n("p+NB"),d=n("3zrx"),m=o.a.createElement;function p(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=function(){var t=Object(a.c)((function(t){return t.post})),e=t.imagePaths,n=t.addPostDone,o=Object(a.b)(),i=Object(d.a)(""),y=Object(l.a)(i,3),b=y[0],h=y[1],v=y[2];Object(r.useEffect)((function(){n&&v("")}),[n]);var g=Object(r.useCallback)((function(){if(!b||!b.trim())return alert("please write the form");var t=new FormData;e.forEach((function(e){t.append("image",e)})),t.append("content",b);var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;console.log(a)}}catch(i){r.e(i)}finally{r.f()}return o({type:s.e,data:t})}),[b,e]),w=Object(r.useRef)(),E=Object(r.useCallback)((function(){w.current.click()}),[w.current]),j=Object(r.useCallback)((function(t){console.log("images",t.target.files);var e=new FormData;[].forEach.call(t.target.files,(function(t){e.append("image",t)}));var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;console.log(a)}}catch(i){r.e(i)}finally{r.f()}o({type:s.G,data:e})}),[]),O=Object(r.useCallback)((function(t){return function(){o({type:s.v,data:t})}}));return m(c.a,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onFinish:g},m(u.a.TextArea,{value:b,onChange:h,maxLength:140,placeholder:"what happened?"}),m("div",null,m("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:w,onChange:j}),m(f.a,{onClick:E},"Image upload"),m(f.a,{type:"primary",style:{float:"right"},htmlType:"submit"},"Twit!")),m("div",null,e.map((function(t,e){return m("div",{key:t,style:{display:"inline-block"}},m("img",{src:"http://localhost:3065/".concat(t),style:{width:"200px"},alt:t}),m("div",null,m(f.a,{onClick:O(e)},"Delete")))}))))},h=n("kduo"),v=o.a.createElement,g=!0;e.default=function(){var t=Object(a.b)(),e=Object(a.c)((function(t){return t.user})).me,n=Object(a.c)((function(t){return t.post})),o=n.mainPosts,l=n.hasMorePost,c=n.loadPostsLoading,u=n.retweetError;return Object(r.useEffect)((function(){u&&alert(u)}),[u]),Object(r.useEffect)((function(){function e(){if(console.log(window.scrollY,document.documentElement.clientHeight,document.documentElement.scrollHeight),window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&l&&!c){var e,n=null===(e=o[o.length-1])||void 0===e?void 0:e.id;t({type:s.n,lastId:n})}}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[l,c,o]),v(i.a,null,e&&v(b,null),o.map((function(t){return v(h.a,{key:t.id,post:t})})))}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",0,1,9,2,3,5,4,6,8,7,10]]]);